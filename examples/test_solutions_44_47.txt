=== Free types and induction ===

given N

Tree ::= stalk | leaf⟨N⟩ | branch⟨Tree × Tree⟩

** Solution 44 **

TEXT: The two cases of the proof are established by equational reasoning: the first by
TEXT:
TEXT: reverse (<> ^ t) = reverse t [cat.1a] = (reverse t) ^ <> [cat.1b]
TEXT:
TEXT: where cat.1a is <> ^ s = s and cat.1b is s ^ <> = s
TEXT:
TEXT: and the second by
TEXT:
TEXT: reverse ((<x> ^ u) ^ t) = reverse (<x> ^ (u ^ t)) [cat.2]
TEXT:                          = reverse (u ^ t) ^ <x>    [reverse.2]
TEXT:                          = (reverse t ^ reverse u) ^ <x>  [anti-distributive]
TEXT:                          = reverse t ^ (reverse u ^ <x>)  [cat.2]
TEXT:                          = reverse t ^ reverse (<x> ^ u)  [reverse.2]

** Solution 45 **

TEXT: The base case:
TEXT:
TEXT: reverse (reverse <>) = reverse <> [reverse.1] = <> [reverse.1]
TEXT:
TEXT: The inductive step:
TEXT:
TEXT: reverse (reverse (<x> ^ t))
TEXT:   = reverse ((reverse t) ^ <x>)  [reverse.2]
TEXT:   = reverse (<x>) ^ reverse (reverse t)  [anti-distributive]
TEXT:   = reverse (<x> ^ <>) ^ reverse (reverse t)  [cat.1]
TEXT:   = ((reverse <>) ^ <x>) ^ reverse (reverse t)  [reverse.2]
TEXT:   = (<> ^ <x>) ^ reverse (reverse t)  [reverse.1]
TEXT:   = <x> ^ reverse (reverse t)  [cat.1]
TEXT:   = <x> ^ t  [reverse (reverse t) = t]

** Solution 46 **

(a)

TEXT: count : Tree -> N
TEXT: count stalk = 0
TEXT: forall n : N | count (leaf n) = 1
TEXT: forall t1, t2 : Tree | count (branch (t1, t2)) = count t1 + count t2
TEXT: (Blocked by: recursive free types and pattern matching)

(b)

TEXT: flatten : Tree -> seq N
TEXT: flatten stalk = <>
TEXT: forall n : N | flatten (leaf n) = <n>
TEXT: forall t1, t2 : Tree | flatten (branch (t1, t2)) = flatten t1 ^ flatten t2
TEXT: (Blocked by: recursive free types and pattern matching)

** Solution 47 **

TEXT: First, exhibit the induction principle for the free type:
TEXT:
TEXT: P stalk and (forall n : N | P (leaf n)) and (forall t1, t2 : Tree | P t1 and P t2 => P (branch (t1, t2)))
TEXT: implies forall t : Tree | P t
TEXT:
TEXT: This gives three cases for the proof:
TEXT:
TEXT: # (flatten stalk) = # <> [flatten] = 0 [#] = count stalk [count]
TEXT:
TEXT: (Remaining cases omitted - require equational reasoning with recursive functions)
